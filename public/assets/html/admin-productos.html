<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestión de Productos - Admin</title>
    <link rel="stylesheet" href="../css/style.css">
    <style>
        /* MODO OSCURO */
        body { background-color: #121212; color: #e0e0e0; font-family: sans-serif; margin: 20px; }
        
        .container { 
            max-width: 1200px; margin: 0 auto; padding: 20px; 
            background: #1e1e1e; border-radius: 12px; border: 1px solid #333;
        }
        
        .header-actions { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; border-bottom: 1px solid #333; padding-bottom: 15px; }
        .header-actions h1 { color: #39FF14; margin: 0; }
        
        .btn-back { text-decoration: none; color: #ccc; font-weight: bold; margin-right: 15px; }
        .btn-back:hover { color: #39FF14; }

        /* Botón Crear */
        .btn-create { background-color: #39FF14; color: black; border: none; padding: 10px 20px; border-radius: 5px; font-weight: bold; cursor: pointer; transition: 0.3s; }
        .btn-create:hover { background-color: #32cb12; transform: scale(1.05); }
        
        /* Tabla */
        table { width: 100%; border-collapse: collapse; }
        th { background-color: #000; color: #39FF14; padding: 15px; text-align: left; border-bottom: 2px solid #39FF14; }
        td { padding: 15px; border-bottom: 1px solid #333; color: #ccc; vertical-align: middle; }
        tr:hover { background-color: #2a2a2a; }
        
        .img-prod { width: 50px; height: 50px; object-fit: cover; border-radius: 4px; border: 1px solid #444; }
        
        /* Botones de Acción en Tabla */
        .btn-action { border: none; padding: 6px 10px; border-radius: 4px; cursor: pointer; margin-right: 5px; }
        .btn-edit { background-color: #ffc107; color: black; }
        .btn-delete { background-color: #dc3545; color: white; }

        /* --- MODAL (Ventana Emergente) --- */
        .modal-overlay {
            display: none; /* Oculto por defecto */
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-color: rgba(0,0,0,0.8);
            z-index: 1000;
            justify-content: center; align-items: center;
        }
        .modal-content {
            background-color: #1e1e1e;
            padding: 30px;
            border-radius: 10px;
            width: 400px;
            border: 1px solid #39FF14;
            box-shadow: 0 0 20px rgba(57, 255, 20, 0.2);
        }
        .form-group { margin-bottom: 15px; }
        .form-group label { display: block; margin-bottom: 5px; color: #39FF14; }
        .form-group input, .form-group select {
            width: 100%; padding: 10px;
            background-color: #2c2c2c; border: 1px solid #444;
            color: white; border-radius: 5px;
            box-sizing: border-box; /* Importante para el padding */
        }
        .form-actions { text-align: right; margin-top: 20px; }
        .btn-cancel { background-color: #666; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; margin-right: 10px; }
        .btn-save { background-color: #39FF14; color: black; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; font-weight: bold; }
    </style>
</head>
<body>

    <main class="container">
        <div class="header-actions">
            <div>
                <a href="admin-dashboard.html" class="btn-back">⬅ Volver</a>
                <span style="font-size: 1.5em; font-weight: bold; color: #39FF14;">Inventario de Productos</span>
            </div>
            <button class="btn-create" onclick="abrirModalCrear()">+ Nuevo Producto</button>
        </div>

        <table>
            <thead>
                <tr>
                    <th>Imagen</th>
                    <th>Nombre</th>
                    <th>Precio</th>
                    <th>Stock</th>
                    <th>Categoría</th>
                    <th>Acciones</th>
                </tr>
            </thead>
            <tbody id="productos-tbody">
                <tr><td colspan="6" style="text-align:center; color: #888;">Cargando inventario...</td></tr>
            </tbody>
        </table>
    </main>

    <div id="modalProducto" class="modal-overlay">
        <div class="modal-content">
            <h2 id="modalTitle" style="margin-top:0; color:white;">Editar Producto</h2>
            <form id="productoForm" onsubmit="guardarProducto(event)">
                <input type="hidden" id="prodId"> <div class="form-group">
                    <label>Nombre del Producto</label>
                    <input type="text" id="prodNombre" required>
                </div>
                <div class="form-group">
                    <label>Precio ($)</label>
                    <input type="number" id="prodPrecio" required>
                </div>
                <div class="form-group">
                    <label>Stock</label>
                    <input type="number" id="prodStock" required>
                </div>
                <div class="form-group">
                    <label>Categoría</label>
                    <input type="text" id="prodCategoria" list="categoriasList">
                    <datalist id="categoriasList">
                        <option value="Consolas">
                        <option value="Juegos">
                        <option value="Accesorios">
                        <option value="PC Gamer">
                    </datalist>
                </div>
                <div class="form-group">
                    <label>URL Imagen</label>
                    <input type="url" id="prodImagen" placeholder="https://...">
                </div>

                <div class="form-actions">
                    <button type="button" class="btn-cancel" onclick="cerrarModal()">Cancelar</button>
                    <button type="submit" class="btn-save">Guardar</button>
                </div>
            </form>
        </div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    <script src="../js/admin-logic.js"></script>

</body>
</html>